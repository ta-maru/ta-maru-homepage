services:
  app: # サービス名は「app」など汎用的なものに変更
    build:
      context: . # ★ルートディレクトリをビルドコンテキストとする
      dockerfile: Dockerfile
      target: development
    container_name: tamaru_homepage_dev
    image: tamaru_homepage_dev
    working_dir: /app
    volumes:
      - .:/app:cached # ★ホストのルートディレクトリをコンテナ内の/appにマウント
      - app_node_modules:/app/node_modules # node_modulesを除外
    ports:
      - "5173:5173" # 開発サーバーのポートを公開
    environment:
      - NODE_ENV=development
      # - VITE_API_URL=http://backend:8000 # バックエンド連携が必要な場合
    networks:
      - default_network # ネットワークを定義

volumes:
  app_node_modules: # node_modules用の名前付きボリューム

networks:
  default_network:
    driver: bridge